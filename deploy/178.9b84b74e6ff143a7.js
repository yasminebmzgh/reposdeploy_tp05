"use strict";(self.webpackChunktp04_bertuol_yoann=self.webpackChunktp04_bertuol_yoann||[]).push([[178],{5178:(_,v,s)=>{s.r(v),s.d(v,{CatalogModule:()=>f});var i=s(6895),a=s(4006),u=s(3074),y=s(4205),t=s(8274),T=s(2340),x=s(529);class c{http;constructor(e){this.http=e}getCatalogue(){return this.http.get(T.N.catalogUrl)}static \u0275fac=function(o){return new(o||c)(t.LFG(x.eN))};static \u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}var Z=s(4318);class d{property="";list=[];filter=new t.vpe;resetList=new t.vpe;searchControl=new a.NI;constructor(){}ngOnInit(){this.searchControl.valueChanges.subscribe(e=>{e?this.filter.emit(this.list.filter(o=>o[this.property].toLowerCase().includes(e.toLowerCase()))):this.resetList.emit()})}static \u0275fac=function(o){return new(o||d)};static \u0275cmp=t.Xpm({type:d,selectors:[["app-search-bar"]],inputs:{property:"property",list:"list"},outputs:{filter:"filter",resetList:"resetList"},decls:1,vars:1,consts:[["type","text","placeholder","Search",3,"formControl"]],template:function(o,n){1&o&&t._UZ(0,"input",0),2&o&&t.Q6J("formControl",n.searchControl)},dependencies:[a.Fj,a.JJ,a.oH]})}function A(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"button",2),t._uU(3,"I"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){const l=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.onClickAdd(l))}),t._uU(5,"Add to cart"),t.qZA()()}if(2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o.name," "),t.xp6(1),t.s9C("routerLink",o.id)}}class g{catalogService;store;filterer="";catalog=[];subscription;constructor(e,o){this.catalogService=e,this.store=o,this.subscription=this.getCatalog()}ngOnInit(){}getCatalog(){return this.catalogService.getCatalogue().subscribe(e=>{this.catalog=e})}updateProducts(e){this.catalog=e}onClickAdd(e){this.store.dispatch(new y.R(e))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(o){return new(o||g)(t.Y36(c),t.Y36(Z.yh))};static \u0275cmp=t.Xpm({type:g,selectors:[["app-catalog"]],decls:5,vars:2,consts:[["property","name",3,"list","filter","resetList"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Catalog"),t.qZA(),t.TgZ(2,"app-search-bar",0),t.NdJ("filter",function(l){return n.updateProducts(l)})("resetList",function(){return n.getCatalog()}),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,A,6,2,"li",1),t.qZA()),2&o&&(t.xp6(2),t.Q6J("list",n.catalog),t.xp6(2),t.Q6J("ngForOf",n.catalog))},dependencies:[i.sg,u.rH,d]})}function F(r,e){if(1&r&&(t.TgZ(0,"div")(1,"div")(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"p"),t._uU(9),t.qZA()()()),2&r){const o=t.oxw();t.xp6(3),t.hij("Name: ",o.product.name,""),t.xp6(3),t.hij("Price: ",o.product.price,""),t.xp6(3),t.hij("Description: ",o.product.description,"")}}class m{catalogService;route;product;constructor(e,o){this.catalogService=e,this.route=o,e.getCatalogue().subscribe(n=>{this.product=n.find(p=>p.id.toString()===this.route.snapshot.paramMap.get("id"))})}ngOnInit(){}static \u0275fac=function(o){return new(o||m)(t.Y36(c),t.Y36(u.gz))};static \u0275cmp=t.Xpm({type:m,selectors:[["app-product-details"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(o,n){1&o&&t.YNc(0,F,10,3,"div",0),2&o&&t.Q6J("ngIf",n.product)},dependencies:[i.O5]})}var b=s(8675);function L(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"li"),t._uU(1),t.ALo(2,"currency"),t.TgZ(3,"button",1),t.NdJ("click",function(){const l=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.onClickRemove(l))}),t._uU(4,"Remove from cart"),t.qZA()()}if(2&r){const o=e.$implicit;t.xp6(1),t.AsE(" ",o.name," : ",t.lcZ(2,2,o.price)," ")}}class h{store;products$;constructor(e){this.store=e,this.products$=this.store.select(b.k.getItems)}onClickRemove(e){this.store.dispatch(new y.m(e))}ngOnInit(){}static \u0275fac=function(o){return new(o||h)(t.Y36(Z.yh))};static \u0275cmp=t.Xpm({type:h,selectors:[["app-shopping-cart"]],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"ul"),t.YNc(1,L,5,4,"li",0),t.ALo(2,"async"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.products$)))},dependencies:[i.sg,i.Ov,i.H9]})}const U=[{path:"cart",component:h},{path:":id",component:m},{path:"",component:g}];class f{static \u0275fac=function(o){return new(o||f)};static \u0275mod=t.oAB({type:f});static \u0275inj=t.cJS({providers:[c],imports:[i.ez,u.Bz.forChild(U),a.UX,u.Bz]})}}}]);